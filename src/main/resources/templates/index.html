<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet"
          type="text/css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
</head>
<body>
<div class="container">
    <div class="inner">
        <div class="text-center">
            <h1 class="mt-3">oEmbed TEST</h1>
            <form th:action="@{/page/oembed}" onsubmit="return validation();">
                <div class="input-group">
                    <input type="text" id="url" name="url" class="form-control"
                           th:value="${url}" placeholder="URL을 입력하세요."/>
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-secondary">검색</button>
                    </div>
                </div>
            </form>
        </div>

        <div th:if="${error != null}" class="bg-light p-5 rounded text-center mt-5">
            <div>
                <i class="fas fa-exclamation-triangle fa-lg" style="color: #e5462a;"></i>
                <span th:text="${error.message}" class="h6"></span>
            </div>
        </div>

        <div id="response" th:if="${response != null}">
            <table class="table">
                <tr th:if="${response.title}">
                    <td>title</td>
                    <td th:text="${response.title}" class="fw-bold"></td>
                </tr>
                <tr th:if="${response.type}">
                    <td>type</td>
                    <td th:text="${response.type}"></td>
                </tr>
                <tr th:if="${response.version}">
                    <td>version</td>
                    <td th:text="${response.version}"></td>
                </tr>
                <tr th:if="${response.width}">
                    <td>width</td>
                    <td th:text="${response.width}"></td>
                </tr>
                <tr th:if="${response.height}">
                    <td>height</td>
                    <td th:text="${response.height}"></td>
                </tr>
                <tr th:if="${response.url}">
                    <td>url</td>
                    <td th:text="${response.url}"></td>
                </tr>
                <tr th:if="${response.authorName}">
                    <td>author_name</td>
                    <td th:text="${response.authorName}"></td>
                </tr>
                <tr th:if="${response.authorUrl}">
                    <td>author_url</td>
                    <td th:text="${response.authorUrl}"></td>
                </tr>
                <tr th:if="${response.providerName}">
                    <td>provider_name</td>
                    <td th:text="${response.providerName}"></td>
                </tr>
                <tr th:if="${response.providerUrl}">
                    <td>provider_url</td>
                    <td th:text="${response.providerUrl}"></td>
                </tr>
                <tr th:if="${response.isPlus}">
                    <td>is_plus</td>
                    <td th:text="${response.isPlus}"></td>
                </tr>
                <tr th:if="${response.html}">
                    <td>html</td>
                    <td>
                        <p th:text="${response.html}"></p>
                        <div th:utext="${response.html}"></div>
                    </td>
                </tr>
                <tr th:if="${response.duration}">
                    <td>duration</td>
                    <td th:text="${response.duration}"></td>
                </tr>
                <tr th:if="${response.description}">
                    <td>description</td>
                    <td th:text="${response.description}"></td>
                </tr>
                <tr th:if="${response.thumbnailUrl}">
                    <td>thumbnail_url</td>
                    <td>
                        <p th:text="${response.thumbnailUrl}"></p>
                        <img th:src="${response.thumbnailUrl}" th:width="${response.thumbnailWidth}"
                             th:height="${response.thumbnailHeight}"/>
                    </td>
                </tr>
                <tr th:if="${response.thumbnailWidth}">
                    <td>thumbnail_width</td>
                    <td th:text="${response.thumbnailWidth}"></td>
                </tr>
                <tr th:if="${response.thumbnailHeight}">
                    <td>thumbnail_height</td>
                    <td th:text="${response.thumbnailHeight}"></td>
                </tr>
                <tr th:if="${response.thumbnailUrlWithPlayButton}">
                    <td>thumbnail_url_with_play_button</td>
                    <td th:text="${response.thumbnailUrlWithPlayButton}"></td>
                </tr>
                <tr th:if="${response.uploadDate}">
                    <td>upload_date</td>
                    <td th:text="${response.uploadDate}"></td>
                </tr>
                <tr th:if="${response.videoId}">
                    <td>video_id</td>
                    <td th:text="${response.videoId}"></td>
                </tr>
                <tr th:if="${response.uri}">
                    <td>uri</td>
                    <td th:text="${response.uri}"></td>
                </tr>
            </table>
        </div>
    </div>
</div>
</body>
</html>
<script>
    function validation() {
        const url = document.getElementById("url").value;
        if (!url) {
            alert("URL을 입력해주세요.");
            return false;
        } else {
            return true;
        }
    }
</script>